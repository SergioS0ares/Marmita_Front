<p-table [value]="data" dataKey="id">
  <ng-template pTemplate="header">
    <tr>
      <th>Nome</th>
      <th>Telefone</th>
      <th>Latitude</th>
      <th>Longitude</th>
      <th>Descrição do Endereço</th>
      <th>Sugestão de Horário</th>  <!-- Coluna para mostrar o horário -->
      <th>Quantidade de Marmitas</th>
      <th>
        Ações
        <button pButton icon="pi pi-plus" (click)="openDialog()" class="p-button-rounded p-button-success" style="float: right;"></button>
      </th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-item>
    <tr>
      <td>{{ item.name }}</td>
      <td>{{ item.phone }}</td>
      <td>{{ item.latitude }}</td>
      <td>{{ item.longitude }}</td>
      <td>{{ item.addressDescription }}</td>
      <td>{{ item.suggestedTime?.value }}</td>
      <td>{{ item.marmitasQuantity || 1 }}</td>
      <td>
        <div class="button-group">
          <button pButton icon="pi pi-pencil" (click)="editItem(item)" class="p-button-rounded p-button-info"></button>
          <button pButton icon="pi pi-trash" (click)="deleteItem(item.id)" class="p-button-rounded p-button-danger"></button>
        </div>
      </td>
    </tr>
  </ng-template>
</p-table>



<!-- Dialog to add an item -->
<!-- Formulário de Adição -->
<p-dialog header="Adicionar Item" [(visible)]="displayDialog" [style]="{width: '400px'}">
  <form (ngSubmit)="onSubmit(itemForm)" #itemForm="ngForm">
    <div class="p-fluid">
      <div class="p-field">
        <label for="name">Nome</label>
        <input id="name" pInputText [(ngModel)]="cliente.name" name="name" required #name="ngModel" />
        <div *ngIf="name.invalid && name.touched" class="p-error">Nome é obrigatório.</div>
      </div>
      <br/>
      <div class="p-field">
        <label for="phone">Telefone</label>
        <p-inputMask mask="(99) 99999-9999" [(ngModel)]="cliente.phone" name="phone" required #phone="ngModel"></p-inputMask>
        <div id="phone" *ngIf="phone.invalid && phone.touched" class="p-error">Telefone é obrigatório.</div>
      </div>
      <br/>
      <div class="p-field">
        <label for="latitude">Latitude</label>
        <input pInputText [(ngModel)]="cliente.latitude" name="latitude" required #latitude="ngModel"/>
        <div id="latitude" *ngIf="latitude.invalid && latitude.touched" class="p-error">Latitude é obrigatória.</div>
      </div>
      <br/>
      <div class="p-field">
        <label for="longitude">Longitude</label>
        <input pInputText [(ngModel)]="cliente.longitude" name="longitude" required #longitude="ngModel"/>
        <div id="longitude" *ngIf="longitude.invalid && longitude.touched" class="p-error">Longitude é obrigatória.</div>
      </div>
      <br/>
      <div class="p-field">
        <label for="addressDescription">Descrição do Endereço</label>
        <input id="addressDescription" pInputText [(ngModel)]="cliente.addressDescription" name="addressDescription" required #addressDescription="ngModel" />
        <div  *ngIf="addressDescription.invalid && addressDescription.touched" class="p-error">Descrição do Endereço é obrigatória.</div>
      </div>
      <br/>
      <!-- Sugestão de Horário com p-dropdown -->
      <div class="p-field">
        <label for="suggestedTime">Sugestão de Horário</label>
        <select id="suggestedTime" pDropdown [(ngModel)]="cliente.suggestedTime" name="suggestedTime" required>
          <option *ngFor="let time of times" [value]="time.value">{{ time.label }}</option>
        </select>
      </div>
      <br/>
      <!-- Quantidade de Marmitas -->
      <div class="p-field">
        <label for="marmitasQuantity">Quantidade de Marmitas</label>
        <input id="marmitasQuantity" pInputText [(ngModel)]="cliente.marmitasQuantity" name="marmitasQuantity" type="number" required #marmitasQuantity="ngModel" min="0" />
        <div *ngIf="marmitasQuantity.invalid && marmitasQuantity.touched" class="p-error">Quantidade de marmitas não pode ser negativa.</div>
      </div>
      <br/>
      <p-footer style="display: flex; flex-direction: column; gap: 10px;">
        <button pButton label="Adicionar" type="submit" [disabled]="itemForm.invalid" style="background-color: #22c55e; color: white; border: none;"></button>
        <button pButton label="Cancelar" icon="pi pi-times" (click)="displayDialog = false" style="background-color: #ef4444; color: white; border: none;"></button>
      </p-footer>
    </div>
  </form>
</p-dialog>
